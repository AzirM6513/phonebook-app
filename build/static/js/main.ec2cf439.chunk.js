(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var r=t(14),a=t.n(r),c=t(3),o=t(1),u=t(4),i=t.n(u),s="/api/persons",l=function(){return i.a.get(s).then((function(e){return e.data}))},d=function(e){return i.a.post(s,e).then((function(e){return e.data}))},j=function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},b=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},h=t(0),f=function(e){var n=e.text,t=e.value,r=e.onChange;return Object(h.jsxs)("div",{children:[n," ",Object(h.jsx)("input",{value:t,onChange:r})]})},m=function(e){var n=e.search,t=e.handleSearchChange;return Object(h.jsx)(f,{text:"filter shown with",value:n,onChange:t})},O=function(e){var n=e.data;return Object(h.jsxs)("form",{onSubmit:n.addPerson,children:[Object(h.jsx)(f,{text:"name:",value:n.newName,onChange:n.handleNameChange}),Object(h.jsx)(f,{text:"number:",value:n.newNumber,onChange:n.handleNumberChange}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",children:"add"})})]})},x=function(e){var n=e.person,t=e.deletePerson;return Object(h.jsxs)("li",{children:[n.name," ",n.number,Object(h.jsx)("button",{onClick:t,children:"delete"})]})},g=function(e){var n=e.persons,t=e.deletePerson;return Object(h.jsx)("ul",{children:n.map((function(e){return Object(h.jsx)(x,{person:e,deletePerson:function(){return t(e)}},e.name)}))})},p=function(e){var n=e.message;return null===n?null:Object(h.jsx)("div",{style:{color:"green",background:"lightgrey",fontSize:22,border:"3px solid green",padding:"2px"},children:Object(h.jsx)("p",{children:n})})},v=function(e){var n=e.message;return null===n?null:Object(h.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:22,border:"3px solid red",padding:"2px"},children:Object(h.jsx)("p",{children:n})})},C=function(){var e=Object(o.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],a=Object(o.useState)(""),u=Object(c.a)(a,2),i=u[0],s=u[1],f=Object(o.useState)(""),x=Object(c.a)(f,2),C=x[0],w=x[1],S=Object(o.useState)(""),N=Object(c.a)(S,2),k=N[0],y=N[1],P=Object(o.useState)(null),L=Object(c.a)(P,2),T=L[0],z=L[1],D=Object(o.useState)(null),E=Object(c.a)(D,2),I=E[0],J=E[1],A=function(){s(""),w("")},B=function(e){z(e),setTimeout((function(){z(null)}),5e3)};Object(o.useEffect)((function(){l().then((function(e){r(e)}))}),[]);var U=t.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())})),q={addPerson:function(e){e.preventDefault();var n={name:i,number:C};if(function(e){return!(e.name&&e.number)}(n))alert("please fill all fields");else{if(function(e){return t.map((function(e){return e.name.toLowerCase()})).includes(e.name.toLowerCase())}(n)){var a=function(e){for(var n=0;n<t.length;n++)if(t[n].name.toLowerCase()===e.name.toLowerCase())return t[n].id}(n);return j(a,n),A(),B("Updated ".concat(n.name)),void l().then((function(e){r(e)}))}d(n).then((function(e){r(t.concat(e)),A(),B("Added ".concat(n.name))})).catch((function(e){J("".concat(e.response.data.error)),setTimeout((function(){J(null)}),5e3)}))}},newName:i,handleNameChange:function(e){s(e.target.value)},newNumber:C,handleNumberChange:function(e){w(e.target.value)}};return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(p,{message:T}),Object(h.jsx)(v,{message:I}),Object(h.jsx)(m,{search:k,handleSearchChange:function(e){y(e.target.value)}}),Object(h.jsx)("h2",{children:"add new contact information"}),Object(h.jsx)(O,{data:q}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(g,{persons:U,deletePerson:function(e){console.log(e),window.confirm("Delete ".concat(e.name,"?"))&&(b(e.id).catch((function(){J("Information of ".concat(e.name," has already been removed from server")),setTimeout((function(){J(null)}),5e3)})),l().then((function(e){r(e)})))}})]})};a.a.render(Object(h.jsx)(C,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.ec2cf439.chunk.js.map